


-- TODO: learn more about scoping in list comprehensions.

-- TODO convert some for loops to list comprehensions.
